---
layout:     post
title:      Clustering NBA Players
author:     Sungho Kim
<!-- tags: 		post template -->
subtitle:  	K nearest neighbors (KNN) in python
<!-- category:  project1 -->
---
In this post, weâ€™ll be using the K-nearest neighbors algorithm and euclidean distance to figure out figure out which NBA players are the most similar to Lebron James. I foudn out that Kemba Walker is the most simlar player to Lebron James according to the NBA data from 16-17 season.

<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">pandas</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">pd</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">math</span>

nba <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>read_csv(<span style="background-color: #fff0f0">&quot;nba17.csv&quot;</span>)

<span style="color: #888888"># Lebron James</span>

<span style="color: #888888"># Select only the numeric columns from the NBA dataset</span>
nba_numeric <span style="color: #333333">=</span> nba[distance_columns]
<span style="color: #888888"># Normalize all of the numeric columns</span>
nba_normalized <span style="color: #333333">=</span> (nba_numeric <span style="color: #333333">-</span> nba_numeric<span style="color: #333333">.</span>mean()) <span style="color: #333333">/</span> nba_numeric<span style="color: #333333">.</span>std()




<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">scipy.spatial</span> <span style="color: #008800; font-weight: bold">import</span> distance
<span style="color: #888888"># Fill in NA values in nba_normalized</span>
nba_normalized<span style="color: #333333">.</span>fillna(<span style="color: #0000DD; font-weight: bold">0</span>, inplace<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>)
<span style="color: #888888"># Find the normalized vector for lebron james.</span>
lebron_normalized <span style="color: #333333">=</span> nba_normalized[nba[<span style="background-color: #fff0f0">&quot;player&quot;</span>] <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;Lebron James&quot;</span>]


<span style="color: #888888"># Find the distance between lebron james and everyone else.</span>
euclidean_distances <span style="color: #333333">=</span> nba_normalized<span style="color: #333333">.</span>apply(<span style="color: #008800; font-weight: bold">lambda</span> row: distance<span style="color: #333333">.</span>euclidean(row, lebron_normalized), axis<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">1</span>)


<span style="color: #888888"># Create a new dataframe with distances.</span>
distance_frame <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>DataFrame(data<span style="color: #333333">=</span>{<span style="background-color: #fff0f0">&quot;dist&quot;</span>: euclidean_distances, <span style="background-color: #fff0f0">&quot;idx&quot;</span>: euclidean_distances<span style="color: #333333">.</span>index})
distance_frame <span style="color: #333333">=</span> distance_frame<span style="color: #333333">.</span>sort_values([<span style="background-color: #fff0f0">&quot;dist&quot;</span>], ascending<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>)

<span style="color: #007020">print</span>(distance_frame)


<span style="color: #888888"># Find the most similar player to lebron (the lowest distance to lebron is lebron, the second smallest is the most similar non-lebron player)</span>
second_smallest <span style="color: #333333">=</span> distance_frame<span style="color: #333333">.</span>iloc[<span style="color: #0000DD; font-weight: bold">1</span>][<span style="background-color: #fff0f0">&quot;idx&quot;</span>]
most_similar_to_lebron <span style="color: #333333">=</span> nba<span style="color: #333333">.</span>loc[<span style="color: #007020">int</span>(second_smallest)][<span style="background-color: #fff0f0">&quot;player&quot;</span>]
<span style="color: #007020">print</span>(most_similar_to_lebron )
</pre></div>
